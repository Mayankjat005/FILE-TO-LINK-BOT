<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>{{ template_ne }} | {{ file_name }}</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>

<style>
:root{
--primary-color:#00f0ff;
--secondary-color:#7000ff;
--bg-gradient:linear-gradient(135deg,#0f0c29,#302b63,#24243e);
--glass-bg:rgba(255,255,255,0.05);
--glass-border:1px solid rgba(255,255,255,0.1);
--card-radius:16px;
}
body{
background:var(--bg-gradient);
color:#fff;
font-family:'Outfit',sans-serif;
min-height:100vh;
display:flex;
flex-direction:column;
}
.navbar{
background:rgba(0,0,0,0.6);
backdrop-filter:blur(10px);
}
.navbar-brand{
color:var(--primary-color)!important;
font-weight:600;
}
.player-wrapper{
background:#000;
border-radius:var(--card-radius);
overflow:hidden;
box-shadow:0 10px 30px rgba(0,0,0,0.5);
margin-top:20px;
border:var(--glass-border);
}
#artplayer{
width:100%;
height:520px;
}
.btn-custom{
border:none;
border-radius:12px;
padding:12px 20px;
font-weight:500;
display:flex;
align-items:center;
justify-content:center;
gap:10px;
text-transform:uppercase;
font-size:0.9rem;
}
.btn-mx{background:linear-gradient(45deg,#2980b9,#2c3e50);color:#fff;}
.btn-vlc{background:linear-gradient(45deg,#e67e22,#d35400);color:#fff;}
.btn-playit{background:linear-gradient(45deg,#8e44ad,#9b59b6);color:#fff;}
.glass-card{
background:var(--glass-bg);
backdrop-filter:blur(12px);
border:var(--glass-border);
border-radius:var(--card-radius);
padding:20px;
margin-bottom:20px;
}
footer{
margin-top:auto;
background:rgba(0,0,0,0.4);
padding:15px;
text-align:center;
font-size:0.8rem;
color:#666;
}
.watermark{
position:fixed;
bottom:20px;
right:20px;
opacity:0.2;
font-size:3rem;
font-weight:800;
transform:rotate(-15deg);
pointer-events:none;
}
</style>
</head>

<body>

<nav class="navbar navbar-dark">
<div class="container">
<span class="navbar-brand">
<i class="fa-solid fa-robot me-2"></i>{{ template_ne }}
</span>
</div>
</nav>

<main class="container py-4">

<div class="player-wrapper mb-4">
<div id="artplayer"></div>
</div>

<div class="d-flex flex-wrap gap-2 mb-3">
<a onclick="mx_player()" class="btn btn-custom btn-mx flex-fill">MX Player</a>
<a onclick="vlc_player()" class="btn btn-custom btn-vlc flex-fill">VLC Player</a>
<a onclick="playit_player()" class="btn btn-custom btn-playit flex-fill">PlayIt</a>
</div>

<div class="glass-card">
<div><strong>Filename:</strong> {{file_name}}</div>
<div><strong>Size:</strong> {{file_size}}</div>
</div>

</main>

<footer>
&copy; 2025 {{ template_ne }}
</footer>

<script src="https://unpkg.com/artplayer/dist/artplayer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

new Artplayer({
container:'#artplayer',
url:'{{file_url}}',
type:'m3u8',
volume:0.7,
autoplay:false,
pip:true,
fullscreen:true,
fullscreenWeb:true,
playbackRate:true,
aspectRatio:true,
hotkey:true,
setting:true,
theme:'#00f0ff',

customType:{
m3u8:function(video,url,art){
if(Hls.isSupported()){
const hls=new Hls();
hls.loadSource(url);
hls.attachMedia(video);

hls.on(Hls.Events.MANIFEST_PARSED,function(){

// QUALITY AUTO DETECT
const levels=hls.levels;
const qualityList=levels.map((level,index)=>({
html:level.height+'p',
value:index
}));

art.setting.update({
name:'Quality',
html:'Quality',
selector:qualityList,
onSelect:function(item){
hls.currentLevel=item.value;
return item.html;
}
});

// AUDIO AUTO DETECT
const audioTracks=hls.audioTracks;
if(audioTracks.length>1){
const audioList=audioTracks.map((track,index)=>({
html:track.name || 'Track '+index,
value:index
}));

art.setting.update({
name:'Audio',
html:'Audio',
selector:audioList,
onSelect:function(item){
hls.audioTrack=item.value;
return item.html;
}
});
}

});

}else if(video.canPlayType('application/vnd.apple.mpegurl')){
video.src=url;
}
}
}

});

});

// External Player Buttons
function mx_player(){
let clean="{{file_url}}".replace(/^https?:\/\//,'');
window.location.href=`intent://${clean}#Intent;package=com.mxtech.videoplayer.ad;type=video/*;scheme=https;end`;
}
function vlc_player(){
let clean="{{file_url}}".replace(/^https?:\/\//,'');
window.location.href=`intent://${clean}#Intent;package=org.videolan.vlc;type=video/*;scheme=https;end`;
}
function playit_player(){
let clean="{{file_url}}".replace(/^https?:\/\//,'');
window.location.href=`intent://${clean}#Intent;package=com.playit.videoplayer;type=video/*;scheme=https;end`;
}
</script>

<div class="watermark">RexBots</div>

</body>
</html>
